(описание создал с помощью ИИ)
# STT_wrighter - Голосовой Транскрайбер

Простое приложение для Windows для транскрипции (преобразования речи в текст) аудио, записываемого с микрофона в реальном времени, с использованием модели Whisper (через faster-whisper). Распознанный текст автоматически вставляется в активное окно.

## Возможности

*   **Запись и транскрипция:** Нажмите горячую клавишу (по умолчанию `F8`), чтобы начать или остановить запись.
*   **Вставка текста:** Распознанный текст автоматически вставляется в текущее активное окно.
*   **Работа в фоне:** Приложение работает в системном трее.
*   **Индикатор записи:** Маленький мигающий красный прямоугольник появляется у курсора во время записи.
*   **Выбор модели:** Использует `large-v3-turbo` по умолчанию, можно изменить через переменную окружения `WHISPER_MODEL_SIZE` или (в будущем) через `config.ini`.
*   **Настройка:** Некоторые параметры (горячая клавиша, метод ввода, нежелательные фразы) настраиваются через файл `config.ini`.
*   **Оптимизация:** Использует `faster-whisper` для ускоренной работы модели, поддерживает CUDA (если доступно).

## Установка

### Вариант 1: Готовый `.exe` (пока недоступен)

### Вариант 2: Запуск из исходного кода

1.  **Установите Python:** Убедитесь, что у вас установлен Python 3.9 или новее.
2.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/ваш_аккаунт/ваш_репозиторий.git
    cd ваш_репозиторий
    ```
3.  **Создайте виртуальное окружение (рекомендуется):**
    ```bash
    python -m venv venv
    venv\Scripts\activate  # Windows
    # source venv/bin/activate # Linux/macOS (если адаптировать)
    ```
4.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```
    *Примечание:* Установка `torch` с поддержкой CUDA может потребовать отдельных шагов. См. [официальный сайт PyTorch](https://pytorch.org/). В `requirements.txt` указана версия для CPU.
5.  **Запустите скрипт:**
    ```bash
    python voice_transcriber.py
    ```

## Зависимости

Основные зависимости перечислены в `requirements.txt`. Ключевые из них:

*   `faster-whisper`: Для эффективной работы модели Whisper.
*   `torch`: Основная библиотека для нейронных сетей (CPU или GPU версия).
*   `sounddevice`: Для записи аудио.
*   `numpy`: Для работы с аудиоданными.
*   `pystray`: Для иконки в системном трее.
*   `keyboard`: Для глобальной горячей клавиши.
*   `pyautogui`: Для определения позиции курсора.
*   `pynput`: (Опционально, как альтернатива `keyboard`)
*   `Pillow`: Для работы с иконкой.
*   `pywin32`: (Только для Windows) Для прямого ввода текста и проверки раскладки.

Создайте файл `requirements.txt` со следующим содержимым:

```text
numpy
sounddevice
torch # CPU версия, для GPU см. сайт PyTorch
faster-whisper
pystray
keyboard
pyautogui
Pillow
pynput # Можно оставить опционально
pywin32>=306; sys_platform == 'win32' 
```
*(Примечание: Версии можно зафиксировать для большей стабильности)*

## Использование

1.  Запустите приложение (`voice_transcriber.exe` или `python voice_transcriber.py`).
2.  Иконка приложения появится в системном трее.
3.  Перейдите в окно, куда вы хотите вставить текст (редактор, браузер и т.д.).
4.  Нажмите горячую клавишу (по умолчанию `F8`), чтобы начать запись. У курсора появится мигающий красный индикатор.
5.  Говорите в микрофон.
6.  Нажмите ту же горячую клавишу (`F8`), чтобы остановить запись.
7.  Распознанный текст будет вставлен в активное окно.
8.  Для выхода щелкните правой кнопкой мыши по иконке в трее и выберите "Выход".

## Конфигурация (`config.ini`)

При первом запуске рядом с исполняемым файлом будет создан `config.ini`.

*   `[settings]`
    *   `input_method`: Метод вставки текста (`keyboard` - эмуляция клавиатуры, `direct_input` - через WinAPI (только Windows)). По умолчанию `keyboard`.
    *   `char_delay`: Задержка между вставляемыми символами (в секундах). По умолчанию `0.03`.
    *   `remove_duplicates`: (Не используется в текущей версии) `True` или `False`.
    *   `model_size`: Размер модели Whisper (например, `tiny`, `base`, `small`, `medium`, `large-v2`, `large-v3`, `large-v3-turbo`). По умолчанию `large-v3-turbo`. Изменение этого параметра здесь пока не реализовано (используйте переменную окружения `WHISPER_MODEL_SIZE`).
    *   `language`: Язык распознавания (по умолчанию `ru`).
    *   `max_recording_seconds`: Максимальная длительность записи в секундах перед автоматической остановкой. По умолчанию `120`.
    *   `hotkey`: Горячая клавиша для старта/остановки записи (например, `f8`, `ctrl+alt+s`). По умолчанию `f8`.
*   `[unwanted_phrases]`
    *   Список фраз (ключ=значение), которые будут удалены из распознанного текста. Например, `phrase1 = Спасибо за просмотр`.
